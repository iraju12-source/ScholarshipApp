<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <title>ACF - Scholarship Application</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; padding: 20px; background-color: #f4f6f9; line-height: 1.6; }
        .container { max-width: 950px; margin: 0 auto; background: white; padding: 40px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        
        /* Top Navigation Bar */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 950px;
            margin: 0 auto 10px auto;
            padding: 0 10px;
        }
        .welcome-msg {
            font-weight: 600;
            color: #2c3e50;
            font-size: 1.1em;
        }
        .logout-link {
            color: #e74c3c;
            text-decoration: none;
            font-weight: bold;
            background: #fff;
            padding: 5px 15px;
            border-radius: 4px;
            border: 1px solid #e74c3c;
            transition: all 0.3s;
        }
        .logout-link:hover {
            background: #e74c3c;
            color: #fff;
        }

        /* Flexbox Header Styles */
        .header-flex { display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 20px; border-bottom: 2px solid #1a5276; padding-bottom: 20px; }
        .logo-img { max-height: 100px; width: auto; }
        .title-group { text-align: left; }
        
        h1, h2 { margin: 0; color: #1a5276; }
        h1 { font-size: 1.8em; }
        h2 { font-size: 1.4em; font-weight: normal; }

        h3 { background-color: #1a5276; color: white; padding: 12px; margin-top: 35px; border-radius: 4px; font-size: 1.1em; }
        .tamil-label { display: block; color: #1a5276; font-weight: bold; font-size: 0.9em; }
        .eng-label { display: block; color: #555; font-size: 0.85em; margin-bottom: 5px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .full-width { grid-column: span 2; }
        
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 4px; box-sizing: border-box; background-color: #fcfcfc; }
        
        .question-box { background-color: #fff9e6; border-left: 5px solid #f39c12; padding: 20px; margin-top: 30px; }
        .declaration-box { background-color: #f8f9fa; border: 1px dashed #7f8c8d; padding: 25px; margin-top: 30px; border-radius: 5px; }
        .declaration-box label { font-size: 0.95em; color: #333; cursor: pointer; }
        
        button { background-color: #27ae60; color: white; padding: 18px; width: 100%; border: none; font-size: 20px; font-weight: bold; margin-top: 40px; cursor: pointer; border-radius: 5px; transition: 0.3s; }
        button:hover { background-color: #1e8449; }
        
        .status-box { background: #d4efdf; padding: 30px; border-radius: 8px; text-align: center; border: 2px solid #27ae60; margin-bottom: 20px;}
        .req { color: red; }
        .detail-card { background: #fff; border: 1px solid #ddd; padding: 20px; border-radius: 5px; margin-top: 10px; }
        .detail-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; }
        .detail-label { font-weight: bold; color: #1a5276; min-width: 250px; }
        .detail-value { color: #333; flex-grow: 1; text-align: left; }
        .file-link { display: inline-block; background: #3498db; color: white; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-weight: bold; font-size: 0.9em; margin-top: 5px; }
        .file-link:hover { background: #2980b9; }
    </style>
</head>
<body>

<div class="top-bar">
    <div class="welcome-msg">
        Welcome {{ session['username'] }}
    </div>
    <a href="/logout" class="logout-link">Logout / வெளியேறு</a>
</div>

<div class="container">
    <div class="header-flex">
        <img src="{{ url_for('static', filename='images/ACF_logo.png') }}" alt="ACF Logo" class="logo-img">
        <div class="title-group">
            <h1 style="text-align:center;">ஆனந்த சைதன்யா அறக்கட்டளை</h1>
            <h2 style="text-align:center;">ANANDA CHAITANYA FOUNDATION</h2>
        </div>
    </div>

    <h2 style="text-align:center; color:#e74c3c; font-weight: bold;"> "கற்கை நன்றே" மாணவர் கல்வி உதவித்தொகை விண்ணப்பம் </h2>
    <h2 style="text-align:center; color:#e74c3c; font-weight: bold;">"KARKAI NANDRE" STUDENT SCHOLARSHIP APPLICATION</h2>
    
    {% if application %}
        <div class="status-box">
            <h2 style="color:#1e8449;">விண்ணப்பம் நிலை (Application Status): {{ application['status'] }}</h2>
            <p><strong>{{ application['full_name'] }}</strong>, விண்ணப்பம் சமர்ப்பிக்கப்பட்டது. (Application has been submitted successfully!!!)</p>
        </div>

        <div class="detail-card">
            <h3>1. தனிநபர் தகவல் / Personal Information</h3>
            <div class="detail-row"><span class="detail-label">முழு பெயர் (Full Name):</span> <span class="detail-value">{{ application['full_name'] }}</span></div>
            <div class="detail-row"><span class="detail-label">பிறந்த தேதி (DOB):</span> <span class="detail-value">{{ application['dob'] }}</span></div>
            <div class="detail-row"><span class="detail-label">பாலினம் (Gender):</span> <span class="detail-value">{{ application['gender'] }}</span></div>
            <div class="detail-row"><span class="detail-label">ஆதார் எண் (Aadhaar No):</span> <span class="detail-value">{{ application['aadhaar_number'] }}</span></div>
            <div class="detail-row"><span class="detail-label">முகவரி (Address):</span> <span class="detail-value">{{ application['address'] }}, {{ application['district'] }} - {{ application['pincode'] }}</span></div>
            <div class="detail-row"><span class="detail-label">கைபேசி (Mobile):</span> <span class="detail-value">{{ application['mobile_primary'] }} / {{ application['mobile_secondary'] }}</span></div>
            <div class="detail-row"><span class="detail-label">மின்னஞ்சல் (Email):</span> <span class="detail-value">{{ application['email'] }}</span></div>

            <h3>2. கல்வித் தகவல் / Educational Information</h3>
            <div class="detail-row"><span class="detail-label">10-ஆம் வகுப்பு பள்ளி (SSLC School):</span> <span class="detail-value">{{ application['sslc_school'] }} ({{ application['sslc_percent'] }}%)</span></div>
            <div class="detail-row"><span class="detail-label">12-ஆம் வகுப்பு பள்ளி (HSC School):</span> <span class="detail-value">{{ application['hsc_school'] }} ({{ application['hsc_percent'] }}%)</span></div>
            <div class="detail-row"><span class="detail-label">கல்லூரி மற்றும் பாடப்பிரிவு (College & Course):</span> <span class="detail-value">{{ application['current_college'] }} - {{ application['current_course'] }}</span></div>
            <div class="detail-row"><span class="detail-label">மதிப்பெண் (CGPA / Marks):</span> <span class="detail-value">{{ application['cgpa'] }}</span></div>

            <h3>3. குடும்ப விவரங்கள் / Family Info</h3>
            <div class="detail-row"><span class="detail-label">தந்தை பெயர் (Father's Name):</span> <span class="detail-value">{{ application['father_name'] }} ({{ application['father_occupation'] }})</span></div>
            <div class="detail-row"><span class="detail-label">தாய் பெயர் (Mother's Name):</span> <span class="detail-value">{{ application['mother_name'] }} ({{ application['mother_occupation'] }})</span></div>
            <div class="detail-row"><span class="detail-label">ஆண்டு வருமானம் (Annual Income):</span> <span class="detail-value">₹{{ application['annual_income'] }}</span></div>
            <div class="detail-row"><span class="detail-label">வீட்டு வகை (Housing Status):</span> <span class="detail-value">{{ application['housing_type'] }}</span></div>

            <h3>4. ஆவணங்கள் / Documents</h3>
            <div class="grid">
                <div>
                    <p><strong>ஆதார் அட்டை (Aadhaar Card):</strong></p>
                    <a href="{{ url_for('download', filename=application['aadhaar_card_file']) }}" class="file-link" target="_blank">View Document / காண்க</a>
                </div>
                <div>
                    <p><strong>10-ஆம் வகுப்பு மதிப்பெண் பட்டியல் (SSLC Marksheet):</strong></p>
                    <a href="{{ url_for('download', filename=application['sslc_marksheet_file']) }}" class="file-link" target="_blank">View Document / காண்க</a>
                </div>
                <div>
                    <p><strong>12-ஆம் வகுப்பு மதிப்பெண் பட்டியல் (HSC Marksheet):</strong></p>
                    <a href="{{ url_for('download', filename=application['hsc_marksheet_file']) }}" class="file-link" target="_blank">View Document / காண்க</a>
                </div>
                <div>
                    <p><strong>விடைத்தாள் (Answer Sheet PDF):</strong></p>
                    <a href="{{ url_for('download', filename=application['written_test_pdf']) }}" class="file-link" target="_blank">View Document / காண்க</a>
                </div>
            </div>
        </div>

    {% else %}
        <form action="/apply" method="POST" enctype="multipart/form-data">
            
            <h3>1. தனிநபர் தகவல் / Personal Information</h3>
            <div class="grid">
                <div>
                    <label class="tamil-label">முழு பெயர் <span class="req">*</span></label>
                    <label class="eng-label">Full Name (As per Aadhaar)</label>
                    <input type="text" name="full_name" required>
                </div>
                <div>
                    <label class="tamil-label">பிறந்த தேதி <span class="req">*</span></label>
                    <label class="eng-label">Date of Birth</label>
                    <input type="date" name="dob" required>
                </div>
                <div>
                    <label class="tamil-label">பாலினம் <span class="req">*</span></label>
                    <label class="eng-label">Gender</label>
                    <select name="gender">
                        <option value="Male">Male / ஆண்</option>
                        <option value="Female">Female / பெண்</option>
                        <option value="Transgender Female">திருநங்கை / Transgender</option>
                        <option value="Transgender Male">திருநம்பி / Transgender1</option>
                    </select>
                </div>
                <div>
                    <label class="tamil-label">ஆதார் எண் <span class="req">*</span></label>
                    <label class="eng-label">Aadhaar Number</label>
                    <input type="text" name="aadhaar_number" pattern="[0-9]{12}" title="Enter 12 digit Aadhaar" required>
                </div>
                <div class="full-width">
                    <label class="tamil-label">ஆதார் அட்டையை இணைக்கவும் <span class="req">*</span></label>
                    <label class="eng-label">Attach your Aadhaar Card (PDF/Image)</label>
                    <input type="file" name="aadhaar_card_file" accept=".pdf, .jpg, .jpeg, .png" required>
                </div>
                <div class="full-width">
                    <label class="tamil-label">நிரந்தர முகவரி <span class="req">*</span></label>
                    <label class="eng-label">Permanent Address</label>
                    <textarea name="address" rows="3" required></textarea>
                </div>
                <div>
                    <label class="tamil-label">மாவட்டம் <span class="req">*</span></label>
                    <label class="eng-label">District</label>
                    <input type="text" name="district" required>
                </div>
                <div>
                    <label class="tamil-label">அஞ்சல் குறியீடு <span class="req">*</span></label>
                    <label class="eng-label">Pincode</label>
                    <input type="text" name="pincode" required>
                </div>
                <div>
                    <label class="tamil-label">கைபேசி எண் 1 <span class="req">*</span></label>
                    <label class="eng-label">Mobile Number 1</label>
                    <input type="tel" name="mobile_primary" required>
                </div>
                <div>
                    <label class="tamil-label">கைபேசி எண் 2</label>
                    <label class="eng-label">Mobile Number 2</label>
                    <input type="tel" name="mobile_secondary">
                </div>
                <div class="full-width">
                    <label class="tamil-label">மின்னஞ்சல்</label>
                    <label class="eng-label">Email ID</label>
                    <input type="email" name="email">
                </div>
            </div>

            <h3>2. கல்வித் தகவல் / Educational Information</h3>
            <div class="grid">
                <div class="full-width">
                    <label class="tamil-label">10-ஆம் வகுப்பு பள்ளி பெயர் <span class="req">*</span></label>
                    <label class="eng-label">SSLC School Name</label>
                    <input type="text" name="sslc_school" required>
                </div>
                <div>
                    <label class="tamil-label">10-ஆம் வகுப்பு சதவீதம் (%) <span class="req">*</span></label>
                    <label class="eng-label">SSLC Percentage (%)</label>
                    <input type="text" name="sslc_percent" required>
                </div>
                <div>
                    <label class="tamil-label">10-ஆம் வகுப்பு மதிப்பெண்</label>
                    <label class="eng-label">SSLC Total Marks</label>
                    <input type="text" name="sslc_marks">
                </div>
                <div class="full-width">
                    <label class="tamil-label">10-ஆம் வகுப்பு மதிப்பெண் சான்றிதழ் <span class="req">*</span></label>
                    <label class="eng-label">SSLC Marksheet Upload (PDF/Image)</label>
                    <input type="file" name="sslc_marksheet_file" accept=".pdf, .jpg, .jpeg, .png" required>
                </div>
                
                <div class="full-width">
                    <label class="tamil-label">12-ஆம் வகுப்பு பள்ளி பெயர் <span class="req">*</span></label>
                    <label class="eng-label">HSC School Name</label>
                    <input type="text" name="hsc_school" required>
                </div>
                <div>
                    <label class="tamil-label">12-ஆம் வகுப்பு சதவீதம் (%) <span class="req">*</span></label>
                    <label class="eng-label">HSC Percentage (%)</label>
                    <input type="text" name="hsc_percent" required>
                </div>
                <div>
                    <label class="tamil-label">12-ஆம் வகுப்பு மதிப்பெண்</label>
                    <label class="eng-label">HSC Total Marks</label>
                    <input type="text" name="hsc_marks">
                </div>
                <div class="full-width">
                    <label class="tamil-label">12-ஆம் வகுப்பு மதிப்பெண் சான்றிதழ் <span class="req">*</span></label>
                    <label class="eng-label">HSC Marksheet Upload (PDF/Image)</label>
                    <input type="file" name="hsc_marksheet_file" accept=".pdf, .jpg, .jpeg, .png" required>
                </div>

                <div class="full-width">
                    <label class="tamil-label">தற்போது பயிலும் கல்லூரி <span class="req">*</span></label>
                    <label class="eng-label">Current College Name</label>
                    <input type="text" name="current_college" required>
                </div>
                <div>
                    <label class="tamil-label">பாடப்பிரிவு <span class="req">*</span></label>
                    <label class="eng-label">Course / Degree</label>
                    <input type="text" name="current_course" required>
                </div>
                <div>
                    <label class="tamil-label">தற்போதைய CGPA / சதவீதம்</label>
                    <label class="eng-label">Current CGPA / Percentage</label>
                    <input type="text" name="cgpa">
                </div>
                <div class="full-width">
                    <label class="tamil-label">செமஸ்டர் மதிப்பெண் விபரங்கள்</label>
                    <label class="eng-label">Semester Marks Details</label>
                    <input type="text" name="semester_marks">
                </div>
                <div class="full-width">
                    <label class="tamil-label">சமீபத்திய செமஸ்டர் மதிப்பெண் சான்றிதழ்</label>
                    <label class="eng-label">Recent Semester Marksheet Upload</label>
                    <input type="file" name="semester_marksheet_file" accept=".pdf, .jpg, .jpeg, .png">
                </div>
            </div>

            <h3>3. குடும்பம் மற்றும் வருமான விபரம் / Family & Financial Info</h3>
            <div class="grid">
                <div>
                    <label class="tamil-label">தந்தை பெயர் <span class="req">*</span></label>
                    <label class="eng-label">Father's Name</label>
                    <input type="text" name="father_name" required>
                </div>
                <div>
                    <label class="tamil-label">தந்தை தொழில் <span class="req">*</span></label>
                    <label class="eng-label">Father's Occupation</label>
                    <input type="text" name="father_occupation" required>
                </div>
                <div>
                    <label class="tamil-label">தாய் பெயர் <span class="req">*</span></label>
                    <label class="eng-label">Mother's Name</label>
                    <input type="text" name="mother_name" required>
                </div>
                <div>
                    <label class="tamil-label">தாய் தொழில் <span class="req">*</span></label>
                    <label class="eng-label">Mother's Occupation</label>
                    <input type="text" name="mother_occupation" required>
                </div>
                <div>
                    <label class="tamil-label">ஆண்டு வருமானம் <span class="req">*</span></label>
                    <label class="eng-label">Annual Family Income</label>
                    <input type="number" name="annual_income" required>
                </div>
                <div>
                    <label class="tamil-label">வீட்டு வகை <span class="req">*</span></label>
                    <label class="eng-label">Housing Type</label>
                    <select name="housing_type">
                        <option value="Own">Own House / சொந்த வீடு</option>
                        <option value="Rented">Rented House / வாடகை வீடு</option>
                        <option value="Hut">Hut / குடிசை வீடு</option>
                    </select>
                </div>
                <div class="full-width">
                    <label class="tamil-label">உடன் பிறந்தவர்கள் விபரம்</label>
                    <label class="eng-label">Sibling / Dependents Details</label>
                    <input type="text" name="dependents">
                </div>
                <div>
                    <label class="tamil-label">வேறு உதவித்தொகை பெறுகிறீர்களா?</label>
                    <label class="eng-label">Are you receiving any other scholarship?</label>
                    <select name="other_scholarship">
                        <option value="No">No / இல்லை</option>
                        <option value="Yes">Yes / ஆம்</option>
                    </select>
                </div>
                <div>
                    <label class="tamil-label">விபரம்</label>
                    <label class="eng-label">If Yes, provide details</label>
                    <input type="text" name="scholarship_details">
                </div>
            </div>

            <h3>4. திறமைகள் மற்றும் சாதனைகள் / Talents & Achievements</h3>
            <div class="full-width">
                <label class="tamil-label">உங்கள் திறமைகள் (விளையாட்டு/கலை/சமூகம்)</label>
                <label class="eng-label">Extra-curricular Talents (Sports/Arts/Social)</label>
                <textarea name="talents" rows="2"></textarea>
            </div>
            
            <h3>5. சான்று அளிப்பவர்கள் / References</h3>
            <div class="grid" style="margin-top:20px;">
                <div class="full-width"><strong>சான்று அளிப்பவர் 1 / Reference 1</strong></div>
                <div><input type="text" name="ref1_name" placeholder="Name / பெயர்"></div>
                <div><input type="text" name="ref1_contact" placeholder="Contact No / கைபேசி"></div>
                <div><input type="text" name="ref1_relation" placeholder="Relation / உறவு"></div>
                
                <div class="full-width" style="margin-top:10px;"><strong>சான்று அளிப்பவர் 2 / Reference 2</strong></div>
                <div><input type="text" name="ref2_name" placeholder="Name / பெயர்"></div>
                <div><input type="text" name="ref2_contact" placeholder="Contact No / கைபேசி"></div>
                <div><input type="text" name="ref2_relation" placeholder="Relation / உறவு"></div>
            </div>

            <div class="question-box">
                <h3 style="margin-top:0; background:#f39c12;">6. எழுத்துத் தேர்வு விடைத்தாள் / Written Test Answer Sheet</h3>
                <p>
                    அறக்கட்டளை வழங்கிய வினாக்களுக்கான விடைகளை ஒரு தாளில் தெளிவாக எழுதி, அதை ஸ்கேன் செய்து <b>ஒரே PDF கோப்பாக</b> இங்கே பதிவேற்றவும். (குறைந்தது 12 பக்கங்கள் இருத்தல் வேண்டும்) <br>
                    <small>Write the answers clearly on paper, scan them, and upload as a <b>single PDF file</b>. (Minimum 12 pages total)</small>
                </p>
                <input type="file" name="answer_sheet" accept=".pdf" required>
            </div>

            <div class="declaration-box">
                <h3 style="margin-top:0; background:#7f8c8d;">7. உறுதிமொழி / Declaration</h3>
                <div style="display: flex; align-items: flex-start; gap: 10px;">
                    <input type="checkbox" name="consent" id="consent_check" style="width: auto; margin-top: 5px;" required>
                    <label for="consent_check">
                        இந்த விண்ணப்பத்தில் கொடுக்கப்பட்டுள்ள தகவல்கள் உண்மையானவை மற்றும் துல்லியமானவை என்று உறுதியளிக்கிறேன். எந்தவொரு தவறான தகவலும் "கற்கை நன்றே" உதவித்தொகையிலிருந்து தகுதியிழப்புக்கு வழிவகுக்கும் என்பதை நான் புரிந்துகொள்கிறேன் / 
                        I hereby declare that the information provided in this application is true and accurate to the best of my knowledge. I understand that any false information may result in disqualification from the Karkai Nandre Scholarship.
                    </label>
                </div>
            </div>

            <button type="submit">SUBMIT APPLICATION / விண்ணப்பத்தை சமர்ப்பிக்கவும்</button>
        </form>
    {% endif %}
</div>

</body>
</html>